# MONITOR Review 27 (V251007R8)

## 후보 1: `holdoff_end_us` 만료 시 0으로 초기화
- 성능 영향: 홀드오프가 종료된 뒤에도 매 SOF마다 `usbHidTimeIsBefore()`를 호출하던 경로를 제거하여, 정상 동작 구간에서 불필요한 32비트 감산 비교가 반복되지 않게 된다. 홀드오프가 끝난 이후에는 단순한 0 체크만 수행하므로 평균 ISR 실행 시간이 줄어든다.
- 복잡도 영향: 조건 분기가 한 단계 추가되지만, 기존 흐름을 그대로 감싸는 수준이라 이해 난이도 변화가 없다.
- USB 불안정성 탐지 영향: 홀드오프 구간에서는 기존과 동일하게 타임스탬프를 동기화하고, 만료 프레임 직후 한 번만 0으로 클리어하므로 Stage 전환이나 다운그레이드 조건에 영향을 주지 않는다.
- 결론: 채택한다.

## 후보 2: 워밍업 완료 시 `last_decay_us` 즉시 반영 및 캐시 로드 지연
- 성능 영향: 워밍업 단계에서는 결국 반환되는데도 불구하고 `score`와 `last_decay_us`를 매번 읽어오던 연산을 제거한다. 동시에 워밍업 완료 시점에 구조체를 즉시 갱신해 이후 경로에서 중복 쓰기를 줄인다.
- 복잡도 영향: 워밍업 블록 내부에서만 구조체를 갱신하고, 이후에 필요한 캐시를 모아서 읽도록 재배치하는 정도로 로직이 더 명확해진다.
- USB 불안정성 탐지 영향: 워밍업 완료/타임아웃 조건에서 `last_decay_us`를 즉시 업데이트하므로 기존과 동일한 기준 시각이 유지된다. 이후 감쇠 로직은 갱신된 값을 그대로 사용하므로 동작 변화가 없다.
- 결론: 채택한다.

## 후보 3: 다운그레이드 큐에 전달하는 누락 프레임 최소값 보정 제거
- 성능 영향: 조건문 하나가 사라져 ISR 경로가 조금 가벼워지지만, 연산량 차이는 미미하다.
- 복잡도 영향: 코드가 단순해지지만, `missed_frames == 0`일 때 큐가 요청을 거부한다는 추가 케이스를 고려해야 한다.
- USB 불안정성 탐지 영향: 향후 임계값 조정으로 `stable_threshold`가 `expected_us`보다 작아질 경우 0프레임 입력이 발생해 다운그레이드 요청이 무시될 위험이 있다.
- 결론: 보류한다 (미채택).
