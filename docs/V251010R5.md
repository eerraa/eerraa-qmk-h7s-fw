# V251010R5 변경 요약

## 1. 주요 개선 사항
- `keyboard_task()` 초입에서 `usbHidStatusLedPending()`을 확인해 호스트 LED 큐를 선행 처리하고, 키 스캔과 독립적으로 `usbHidServiceStatusLed()`를 호출하도록 조정했습니다.
- WS2812 RGB 경로는 `ws2812HasPendingTransfer()`로 DMA 서비스 조건을 확인하고, `ws2812_setleds()`에서 실제 색상 변경이 발생한 경우에만 `ws2812RequestRefresh()`를 호출하도록 최적화했습니다.
- BRICK60 LED 포트 구현을 `led_port_indicator.c`, `led_port_host.c`, `led_port_via.c`로 분리하여 인디케이터 합성, 호스트 큐 처리, VIA 명령 해석을 독립 모듈로 관리합니다.

## 2. 검증 계획
- HID 호스트 LED 토글 스트레스 테스트 중 `usbHidStatusLedPending()`이 즉시 소거되는지 확인하고, 루프 지연이 0.1ms 이하로 유지되는지 로직 분석기로 계측합니다.
- WS2812 RGB 토글 패턴에서 DMA 재기동 횟수를 측정하여 기존 대비 30% 이상 감소했는지 확인합니다.
- 모듈 분할 후 VIA 커맨드, 인디케이터 오버레이, EEPROM 마이그레이션이 정상적으로 동작하는지 단위 테스트와 실제 키보드에서 검증합니다.

## 3. 문서화
- `docs/features_led_port.md`와 `docs/features_instability_monitoring.md`에 모듈 분할 및 큐 조회 API 반영.
- 본 문서(`docs/V251010R5.md`)에 변경 요약과 검증 계획을 기록했습니다.
