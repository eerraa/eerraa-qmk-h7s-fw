# V251012R6 RGB 인디케이터 추가 리팩토링 검토

## 검토 개요
- 대상: V251012R2~R5에서 정비한 Brick60 RGB 인디케이터 파이프라인.
- 목표: 남아 있는 중복 연산 및 인터럽트 경로의 불필요 호출을 보수적으로 제거해 안정성을 유지하며 오버헤드를 줄이는지 확인.

## 불필요 코드 / 사용 종료된 요소 정리
- V251012R2~R5 기준으로 사용 흔적이 남아 있는지 확인한 결과, 외부에서 더 이상 참조하지 않는 `rgblight_indicator_get_config()` API를 제거.
- 동일한 구성/호스트 상태 반복 전달에 대한 early-return 최적화는 유지하며 추가 정리는 필요하지 않음.

## 성능 및 오버헤드 검토
- 불필요한 API 제거로 인해 외부 모듈에서 구성 구조체를 복사하는 경로가 차단되어, 상태 캡슐화 유지와 함께 중복 동기화 가능성이 줄어듦.
- 기존 early-return 최적화(V251012R5)가 그대로 유지되므로 추가적인 성능 조정은 불필요하다고 판단.

## 제어 흐름 간소화
- 인디케이터 구성 조회 API 제거로 갱신/호스트 연동 경로만 공개되며, 외부 모듈이 상태를 직접 조작할 필요가 없어 제어 흐름이 단순화됨.
- `rgblight_indicator_state` 내부 캐시 구조는 유지하여 R4에서 도입한 색상 캐싱 효과를 그대로 활용.

## 수정 적용 여부 판단
- 외부 참조가 없는 API를 제거함으로써 상태 동기화 지점을 최소화하고, 향후 리팩토링 시 의존성 추적이 쉬워짐.
- 기존 최적화가 안정적으로 동작하고 있으므로 추가적인 코드 변경은 필요하지 않음.

**결론: 수정 적용.**

---

## 이전 기록 (V251012R4)

- `rgblight_indicator_compute_color()`를 도입하여 HSV→RGB 변환을 구성 변경 시 한 번만 수행하고, 렌더링 시에는 캐시된 `rgb_led_t` 값을 그대로 복사.
- 캐시된 색상을 구조체 복사로 채우면서 `setrgb()` 호출 오버헤드를 제거해 루프 내 함수 호출을 없앰.
- 구성 변경 시 캐시 갱신과 상태 전이를 동시에 처리하도록 `rgblight_indicator_update_config()`를 정리하여 데이터 흐름을 한 곳에서 관리.
- VIA 경로가 직접 업데이트 함수를 호출하도록 변경해 함수 간 의존 관계를 축소.
- HSV→RGB 변환 캐싱과 함수 호출 축소로 렌더링 오버헤드 감소.
- 포트 계층 래퍼 제거로 코드 흐름 간결화 및 유지보수 용이성 향상.

