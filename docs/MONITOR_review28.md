# MONITOR Review 28 (V251007R9)

## 후보 1: Prime 시 홀드오프·워밍업 델타 0 처리 최적화
- 성능 영향: `holdoff_delta_us` 혹은 `warmup_delta_us`가 0일 때도 덧셈과 후속 비교가 수행되어 첫 SOF에서 불필요한 분기가 남아 있었다. Prime 단계에서 0을 즉시 기록하면 다음 프레임부터 단순 플래그 검사만 수행하므로 초기화 직후 경로가 약간 더 가벼워진다.
- 복잡도 영향: Prime 내부에서 0 여부를 한 번 판별해 값을 설정할 뿐이며, 기존 흐름을 단순화하는 효과가 있어 이해가 쉬워진다.
- USB 불안정성 탐지 영향: 구성 이전/미지원 속도 구간에서는 원래도 감시가 비활성 상태였으므로, 워밍업을 즉시 완료 처리해도 다운그레이드 조건에는 변화가 없다. 구성된 상태에서는 델타가 0이 아니므로 기존과 동일하게 워밍업이 적용된다.
- 결론: 채택한다.

## 후보 2: 누락 프레임 패널티 0 가드 제거
- 성능 영향: 안정 감시 단계에서 `missed_frames > 0` 분기가 항상 참이므로 조건 검사를 제거하면 분기 예측과 32비트 비교가 줄어든다. 워스트 케이스는 동일하지만 평균 경로에서 명령 수가 감소한다.
- 복잡도 영향: 단순한 뺄셈만 남아 코드가 짧아진다. 주석으로 안정 임계값이 기대 간격의 2배 이상임을 명시해 유지보수 시 혼동을 줄였다.
- USB 불안정성 탐지 영향: HS/FS 파라미터가 모두 `stable_threshold >= 2 * expected`를 만족하므로, `missed_frames`는 최소 2가 된다. 따라서 패널티는 항상 1 이상이며 다운그레이드 트리거 조건이 변하지 않는다. 임계 테이블이 변할 경우만 재검토하면 된다.
- 결론: 채택한다.

## 후보 3: 폴링 속도 측정 카운터 16비트화 및 전위 증가 사용
- 성능 영향: 샘플 윈도우가 1000/8000 프레임으로 제한되어 있으므로 카운터를 16비트로 줄이면 접근 폭이 감소한다. 동시에 `++cnt >= window` 패턴으로 비교를 한 번만 수행해 루프 당 연산을 줄일 수 있다.
- 복잡도 영향: 변수형이 명확해지고, 조건문 구조도 더 간결해진다.
- USB 불안정성 탐지 영향: 샘플 윈도우 값이 65535 이하로 유지되는 한 동작 변화가 없으며, USB 모니터링 로직과 직접적인 상호작용이 없다.
- 결론: 채택한다.
