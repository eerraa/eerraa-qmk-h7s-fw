# MONITOR Review 30 (V251008R2)

## 후보 1: 워밍업 목표 도달 프레임에서 구조체 쓰기 지연
- 성능 영향: 워밍업 누적이 목표값에 도달한 프레임에서도 `mon->warmup_good_frames`를 즉시 기록하고 있었는데, 해당 프레임 직후에는 워밍업 루프를 빠져나가므로 같은 값을 다시 읽지 않는다. 기록 시점을 목표 미달 구간에 한정하면 마지막 프레임에서 한 번의 저장을 덜 수행해 ISR 경로의 메모리 쓰기를 줄일 수 있다.
- 복잡도 영향: 증가 직후 목표 도달 여부를 판별해 분기만 추가하면 되므로 제어 흐름이 "증가 → 목표 미달 시 조기 반환 → 목표 달성 시 완료 처리"로 더 명확해진다.
- USB 불안정성 탐지 영향: 목표에 도달한 프레임에서는 바로 완료 플래그를 세우고 감쇠 기준을 갱신하므로, 기록 시점을 지연해도 워밍업 완료 판단이 변하지 않는다. 워밍업 카운터 최종값은 완료 분기에서 한 번만 기록하여 관측 값도 유지된다.
- 결론: 채택한다.

## 후보 2: 점수 누적을 임계 포화 방식으로 단순화
- 성능 영향: 기존에는 `score + penalty` 결과를 임시 변수에 저장한 뒤 두 번 비교했다. 임계값까지 남은 여유(`room`)를 계산해 패널티가 이를 넘을 때만 포화시키면 덧셈과 비교를 한 번씩만 수행하고, 패널티가 0일 때는 덧셈도 건너뛸 수 있어 평균 경로가 가벼워진다.
- 복잡도 영향: `room` 계산과 포화 분기를 추가하지만, "임계 초과 여부 → 남은 여유 비교" 순으로 로직이 단순해져 가독성이 향상된다. 변수 수도 기존과 유사하다.
- USB 불안정성 탐지 영향: 포화 방식은 `score >= degrade_threshold` 조건을 그대로 유지하면서 동일 프레임에서 임계 초과 시 다운그레이드를 트리거한다. 점수가 임계값을 넘을 때 즉시 포화시키므로 오버플로우 위험도 줄어든다.
- 결론: 채택한다.

## 후보 3: 패널티 계산을 다운그레이드 분기 안으로 이동
- 성능 영향: 패널티 계산을 실제 다운그레이드가 필요할 때만 수행하면 평균 비용이 줄어들지만, 다운그레이드 여부 자체를 판단하기 위해서는 패널티가 필수여서 실질적인 절감 효과가 없다.
- 복잡도 영향: 패널티를 지연 계산하려면 분기 안팎에서 동일한 수식을 두 번 작성하거나, 플래그를 추가로 관리해야 해 흐름이 복잡해진다.
- USB 불안정성 탐지 영향: 패널티를 늦게 계산하다가 분기 조건이 어긋나면 점수 누적이 잘못되어 다운그레이드 트리거가 누락될 수 있다.
- 결론: 보류한다.
