# BRICK60 LED 포트 리뷰 (V251009R4)

## 개선안 A: LED 타입 공통 가드 헬퍼 도입
- 중복된 `led_type` 범위 검사를 헬퍼 함수로 통합하고, 구성/프로파일 포인터를 직접 반환하도록 단순화합니다.

### 변경 요약
- `led_config_from_type()`와 `indicator_profile_from_type()` 헬퍼를 추가하고, 관련 호출부에서 직접 배열 인덱싱을 대체합니다.
- 인디케이터 설정/표시 경로에서 공통 헬퍼를 사용하도록 갱신합니다.

### 기대 효과
- LED 타입 검증 로직이 한 곳에 모여 코드 복잡도가 낮아지고, 동일한 경계 조건을 재사용할 수 있습니다.
- 포인터를 통해 구조체 필드를 접근하여 중복 인덱싱을 줄이고 가독성을 향상시킵니다.

### 잠재 부작용
- 헬퍼 함수 도입으로 인해 잘못 사용할 경우 `NULL` 처리 누락 위험이 있으나, 전 구문에 가드를 추가하여 방지합니다.

### 적용 결정
- 헬퍼 도입으로 코드 유지보수가 용이해지므로 **적용**합니다.

## 개선안 B: 인디케이터 LED 범위 상한 캐싱
- 인디케이터 프로파일에 LED 종료 인덱스를 캐싱하여, 루프마다 상한 계산과 범위 보정을 반복하지 않도록 합니다.

### 변경 요약
- 프로파일 구조체에 `end` 필드를 추가하고, 초기화 시 `start + count`와 `RGBLIGHT_LED_COUNT`를 비교한 값을 미리 저장합니다.
- 표시 루프에서 `count` 대신 `end`를 사용하도록 변경하고, 관련 주석을 최신화합니다.

### 기대 효과
- 루프 실행 시 덧셈/형변환 및 조건 분기 수행이 제거되어 CPU 부하가 소폭 경감됩니다.
- 상한 계산이 초기화 시점으로 이동하여 코드 의도가 명확해집니다.

### 잠재 부작용
- `RGBLIGHT_LED_COUNT`가 컴파일 시점 상수라는 가정이 필요합니다. 펌웨어 전역에서 상수로 정의되어 있어 실제 부작용 가능성은 낮습니다.

### 적용 결정
- 반복 연산 제거에 따른 성능 이점이 있으므로 **적용**합니다.
